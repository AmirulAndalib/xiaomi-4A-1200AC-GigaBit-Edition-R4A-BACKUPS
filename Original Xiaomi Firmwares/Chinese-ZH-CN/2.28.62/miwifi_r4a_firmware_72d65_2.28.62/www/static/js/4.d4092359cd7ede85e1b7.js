webpackJsonp([4],{GqMl:function(t,e){},jVDi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lC5x"),o=s.n(a),r=s("J0Oq"),i=s.n(r),n=s("teIl"),p=s("NxGh"),d=s("n8t0"),c=s("PkfQ"),u={name:"WifiInput",data:function(){return{formstate:{},sameRouterPwd:!0,routerPwd:null,wifi:{name:"",locale:"家",ssid:"",password:null,encryption:"mixed-psk",nonce:"",newPwd:"",oldPwd:"",txpwr:1,update:!0},passtype:"password",Router_passtype:"password"}},props:{showBtn:Boolean},components:{Subtitle:c.a,CheckBox:d.a},methods:{updateChange:function(t){this.update=t},switchPwdType:function(t){t?this.Router_passtype="password"===this.Router_passtype?"text":"password":this.passtype="password"===this.passtype?"text":"password"},onSubmit:function(){var t=this;return i()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.sameRouterPwd){e.next=6;break}if(!t.formstate.name.$invalid&&!t.formstate.password.$invalid){e.next=3;break}return e.abrupt("return");case 3:t.routerPwd=t.wifi.password,e.next=8;break;case 6:if(!t.formstate.$invalid){e.next=8;break}return e.abrupt("return");case 8:s={wifi:t.wifi,routerPwd:t.routerPwd},t.$emit("submit",s);case 10:case"end":return e.stop()}},e,t)}))()}},created:function(){this.wifi.name=this.common.getCookie("ssid_name")?this.common.getCookie("ssid_name"):""}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vue-form",{staticClass:"width100",attrs:{state:t.formstate,autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"form form-res"},[s("Subtitle",{attrs:{name:"WiFi设置"}}),t._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item1"},[s("label",{attrs:{for:"name"}},[t._v("WiFi名称:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.wifi.name,expression:"wifi.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",placeholder:"XIAOMI_1A1A",autocomplete:"off",checklength:"",required:""},domProps:{value:t.wifi.name},on:{input:function(e){e.target.composing||t.$set(t.wifi,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item2"},[s("label",{attrs:{for:"name"}},[t._v("WiFi密码:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.wifi.password,expression:"wifi.password",modifiers:{trim:!0}}],attrs:{placeholder:"请设置WiFi密码，至少8位",name:"password",autocomplete:"off",type:t.passtype,wifipassword:"",minlength:"8",maxlength:"63",required:""},domProps:{value:t.wifi.password},on:{input:function(e){e.target.composing||t.$set(t.wifi,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{staticClass:"iconfont icon-yanjing-kejian",class:{blue:"text"===t.passtype},on:{click:function(e){t.switchPwdType(0)}}})])]),t._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"name",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[t._v("*WiFi名称不能为空")]),t._v(" "),s("div",{attrs:{slot:"checklength"},slot:"checklength"},[t._v("*WiFi名称最多28字节")])]),t._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"password",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[t._v("*WiFi密码不能为空")]),t._v(" "),s("div",{attrs:{slot:"minlength"},slot:"minlength"},[t._v("*WiFi密码不少于8位")]),t._v(" "),s("div",{attrs:{slot:"maxlength"},slot:"maxlength"},[t._v("*WiFi密码不多于63位")]),t._v(" "),s("div",{attrs:{slot:"wifipassword"},slot:"wifipassword"},[t._v("*WiFi密码不能包含中文")])]),t._v(" "),s("Subtitle",{directives:[{name:"show",rawName:"v-show",value:!t.sameRouterPwd,expression:"!sameRouterPwd"}],attrs:{name:"管理密码设置"}}),t._v(" "),s("validate",{directives:[{name:"show",rawName:"v-show",value:!t.sameRouterPwd,expression:"!sameRouterPwd"}],attrs:{tag:"label"}},[s("div",{staticClass:"item3 router_password"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.routerPwd,expression:"routerPwd",modifiers:{trim:!0}}],attrs:{name:"routerPwd",placeholder:"请设置管理密码，至少8位",type:t.Router_passtype,wifipassword:"",minlength:"8",maxlength:"63",required:""},domProps:{value:t.routerPwd},on:{input:function(e){e.target.composing||(t.routerPwd=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{staticClass:"iconfont icon-yanjing-kejian",class:{blue:"text"===t.Router_passtype},on:{click:function(e){t.switchPwdType(1)}}})])]),t._v(" "),s("field-messages",{directives:[{name:"show",rawName:"v-show",value:!t.sameRouterPwd,expression:"!sameRouterPwd"}],staticClass:"error-tip",attrs:{name:"routerPwd",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[t._v("*路由器管理密码不能为空")]),t._v(" "),s("div",{attrs:{slot:"minlength"},slot:"minlength"},[t._v("*路由器管理密码不少于8位")]),t._v(" "),s("div",{attrs:{slot:"maxlength"},slot:"maxlength"},[t._v("*路由器管理密码不多于63位")]),t._v(" "),s("div",{attrs:{slot:"wifipassword"},slot:"wifipassword"},[t._v("*路由器管理密码不能包含中文")])]),t._v(" "),s("ul",{staticClass:"checkboxs"},[s("li",[s("CheckBox",{attrs:{name:"passwd",value:"router"},model:{value:t.sameRouterPwd,callback:function(e){t.sameRouterPwd=e},expression:"sameRouterPwd"}}),t._v("将WiFi密码作为路由器管理密码")],1),t._v(" "),s("li",[s("CheckBox",{attrs:{name:"update",value:"update"},on:{change:t.updateChange},model:{value:t.wifi.update,callback:function(e){t.$set(t.wifi,"update",e)},expression:"wifi.update"}}),t._v("路由空闲时为您自动升级固件版本，以便提供更好体验")],1)])],1),t._v(" "),t.showBtn?s("div",{staticClass:"footer width40"},[s("button",{staticClass:"button",attrs:{type:"submit"}},[t._v("下一步")])]):t._e()])},staticRenderFns:[]};var l=s("C7Lr")(u,m,!1,function(t){s("w7N8")},"data-v-506af83d",null).exports,v=s("hNqL"),w={name:"error",data:function(){return{fromnomode:"",type:0,formstate:{},errorType:0,errCode:0,from:"",pppoeErrorMsg:"",errMsg:"",minvalid:!1,minvalid1:!1,isOpened:!1,isOpened1:!1,model:{name:"",passwd:""},routerPwd:"",wifi:{update:!0},switchpass:"password",switchpass1:"password",pppoeStatus:0,pppoeStatusTimer:null,pppoeErrorCode:0,wifitomanage:1,clientHeight:document.documentElement.clientHeight,showBtn:!0}},components:{Header:n.a,Loading:p.a,Subtitle:c.a,CheckBox:d.a,WifiInput:l,Toast:v.a},methods:{getWanType:function(){var t=this;return i()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.getWanType();case 2:(s=e.sent).data&&0==s.data.code?1==s.data.wanType?(t.common.setInitLog({type:0,step:"init_web_pppoe"}),t.type=1,"cannot_find_mode"==t.fromnomode&&t.common.setInitLog({type:0,step:"nomode_retry_success"}),"error1"==t.fromnomode&&t.common.setInitLog({type:0,step:"nocable_retry_success"})):2==s.data.wanType?t.$router.push({path:"/dhcp"}):99==s.data.wanType?t.$router.push({path:"/error1",query:{from:"guide"}}):t.$router.push({path:"/cannot_find_mode"}):("cannot_find_mode"==t.fromnomode&&t.common.setInitLog({type:0,step:"nomode_retry_fail"}),"error1"==t.fromnomode&&t.common.setInitLog({type:0,step:"nocable_retry_fail"}),t.$router.push({path:"/cannot_find_mode"}));case 4:case"end":return e.stop()}},e,t)}))()},switchPwd:function(){this.switchpass="password"==this.switchpass?"text":"password",this.isOpened=!this.isOpened},switchPwd1:function(){this.switchpass1="password"==this.switchpass1?"text":"password",this.isOpened1=!this.isOpened1},gotoOperators:function(){this.common.setInitLog({type:0,step:"pppoe_operator"}),this.$router.push({path:"/operators"})},getAccFromOld:function(){this.common.setInitLog({type:0,step:"pppoe_restorefromold"}),this.$router.push({path:"/get_from_old_router"})},skip:function(){this.type=2},selectModel:function(){this.common.setInitLog({type:0,step:"pppoe_rechoose"}),this.$router.push({path:"/error2"})},onSubmitOptAcc:function(){var t=this;return i()(o.a.mark(function e(){var s,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.formstate.$invalid){e.next=2;break}return e.abrupt("return");case 2:return s={wanType:"pppoe",pppoeName:t.model.name,pppoePwd:t.model.passwd},e.next=5,t.axios.setWanNew(s);case 5:a=e.sent,t.type=3,0==a.data.code?(t.pppoeStatus=0,t.checkPppoeStatus(),t.common.setInitLog({type:0,step:"pppoe_success"})):(t.type=1,t.$refs.tip.showTips(a.data.msg||"发生未知错误，请稍后再试~"),t.common.setInitLog({type:0,step:"pppoe_fail"}),t.common.setInitLog({type:0,step:"pppoe_fail"+a.data.code}));case 8:case"end":return e.stop()}},e,t)}))()},checkPppoeStatus:function(){var t=this;return i()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.pppoeStatus&&1!=t.pppoeStatus&&4!=t.pppoeStatus){e.next=5;break}return e.next=3,t.axios.getPppoeStatus();case 3:0==(s=e.sent).data.code&&(t.pppoeStatus=s.data.status,3==t.pppoeStatus&&(t.pppoeErrorCode=s.data.errcode,t.pppoeErrorMsg=s.data.msg),t.pppoeStatusTimer=setTimeout(function(){t.checkPppoeStatus()},1e3));case 5:2==t.pppoeStatus&&(clearTimeout(t.pppoeStatusTimer),t.type=2,t.common.setInitLog({type:0,step:"pppoe_wifiset"})),3==t.pppoeStatus&&(clearTimeout(t.pppoeStatusTimer),t.type=1,"691"==t.pppoeErrorCode?t.errorType=1:"678"==t.pppoeErrorCode?t.errorType=2:t.errorType=3);case 7:case"end":return e.stop()}},e,t)}))()},onSubmitWifiAcc:function(t){var e=this;return i()(o.a.mark(function s(){var a,r,i,n,p;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.type=4,a={info:"auto_upgrade="+t.wifi.update},s.next=4,e.axios.upgrade(a);case 4:return s.sent,(r={locale:"家",name:t.wifi.name,ssid:t.wifi.name,password:t.wifi.password,routerWorkType:"normal",encryption:"mixed-psk",txpwr:1}).nonce=e.common.Encrypt.init(),r.oldPwd=e.common.Encrypt.oldPwd("admin"),r.newPwd=e.common.Encrypt.newPwd("admin",t.routerPwd),e.GLOBAL.adminPassword=t.routerPwd,s.next=12,e.axios.setRouterNormal(r);case 12:0==(i=s.sent).data.code?(e.common.setInitLog({type:0,step:"pppoe_done"}),n={},n={ssid2g_ssid:r.ssid,ssid2g_passwd:r.password,from:"pppoe",lan_ip:i.data.ip},(p=e.common.getCookie("hardware"))&&"R3L"!=p&&"R4C"!=p&&"R1CL"!=p&&"R4CM"!=p&&(n.ssid5g_ssid=r.ssid+"_5G",n.ssid5g_passwd=r.password),e.$router.push({path:"/wifi_complete",query:n})):(e.type=2,e.$refs.tip.showTips(i.data.msg||"发生未知错误，请稍后再试~"));case 14:case"end":return s.stop()}},s,e)}))()}},created:function(){this.$route.query.type||"oldRouter"==this.$route.query.from?this.$route.query.type?this.type=this.$route.query.type:this.type=1:this.getWanType(),this.from=this.$route.query.from,this.model.name=this.GLOBAL.oldUserName?this.GLOBAL.oldUserName:"",this.model.passwd=this.GLOBAL.oldPassword?this.GLOBAL.oldPassword:"";var t=this;"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&window.addEventListener("hashchange",function(){var e=window.location.hash.slice(1);t.$route.path!==e&&t.$router.replace(e)},!1)},mounted:function(){var t=this;window.onresize=function(){t.clientHeight>document.documentElement.clientHeight?t.showBtn=!1:t.showBtn=!0}},beforeRouteEnter:function(t,e,s){s(function(t){"cannot_find_mode"==e.name&&(t.fromnomode="cannot_find_mode"),"error1"==e.name&&(t.fromnomode="error1")})}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},["oldRouter"==t.from?s("Header",{attrs:{name:"连接互联网"}}):s("Header",{attrs:{name:"上网向导"}}),t._v(" "),0==t.type?s("Loading",{attrs:{desc:"正在检测你的上网环境，请耐心等待..."}}):1==t.type?s("div",{staticClass:"account"},[s("div",{staticClass:"form"},[s("vue-form",{staticClass:"width100",attrs:{state:t.formstate,"show-messages":"$touched || $submitted"},on:{submit:function(e){return e.preventDefault(),t.onSubmitOptAcc(e)}}},[s("Subtitle",{attrs:{name:"请输入宽带运营商提供的账号密码"}}),t._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item1"},[s("label",{attrs:{for:"name"}},[t._v("宽带账户")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.model.name,expression:"model.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入宽带账户",name:"name",required:""},domProps:{value:t.model.name},on:{input:function(e){e.target.composing||t.$set(t.model,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item2"},[s("label",{attrs:{for:"passwd"}},[t._v("宽带密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.model.passwd,expression:"model.passwd",modifiers:{trim:!0}}],attrs:{placeholder:"请输入宽带密码",name:"passwd",type:t.switchpass,required:""},domProps:{value:t.model.passwd},on:{input:function(e){e.target.composing||t.$set(t.model,"passwd",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{staticClass:"iconfont icon-yanjing-kejian",class:{blue:t.isOpened},on:{click:t.switchPwd}})])]),t._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"passwd"}},[s("div",{attrs:{slot:"required"},slot:"required"},[t._v("*宽带密码不能为空")])]),t._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"name"}},[s("div",{attrs:{slot:"required"},slot:"required"},[t._v("*宽带账户不能为空")])]),t._v(" "),1==t.errorType?s("div",{staticClass:"error-tip"},[s("div",{},[t._v("\n              "+t._s(this.pppoeErrorMsg||"帐号或密码错误（错误码：691）")+"\n          ")]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              1. 如果忘记账号或密码，您可以"),s("span",{staticClass:"blue",on:{click:t.getAccFromOld}},[t._v("一键从旧路由器获取账号&密码")])]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              2. 请确认帐号是否欠费，或联系您的"),s("span",{staticClass:"blue",on:{click:t.gotoOperators}},[t._v("宽带运营商")])])]):t._e(),t._v(" "),2==t.errorType?s("div",{staticClass:"error-tip"},[s("div",{},[t._v("\n             "+t._s(this.pppoeErrorMsg||"同一账号重复登录（错误码：678）")+"\n          ")]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              1. 重新插拔WAN口连接的网线，并将光猫/家庭网关断电重启，10分钟后重新进行初始化。\n\n\n          ")]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              2. 若还是不行，请联系您的"),s("span",{staticClass:"blue",on:{click:t.gotoOperators}},[t._v("宽带运营商")]),t._v("确认账号情况\n          ")])]):t._e(),t._v(" "),3==t.errorType?s("div",{staticClass:"error-tip"},[s("div",{},[t._v("\n             运营商接口返回错误（错误码："+t._s(t.pppoeErrorCode)+"）\n          ")]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              1. 重新插拔WAN口连接的网线，并将光猫/家庭网关断电重启，10分钟后重新进行初始化。\n\n          ")]),t._v(" "),s("div",{staticClass:"desc"},[t._v("\n              2. 若还是不行，请联系您的"),s("span",{staticClass:"blue",on:{click:t.gotoOperators}},[t._v("宽带运营商")])])]):t._e(),t._v(" "),"oldRouter"==t.from?s("div",{}):s("div",{},[0==t.errorType?s("div",{staticClass:"forget"},[s("ul",[s("li",[t._v("忘记账号密码？")]),t._v(" "),s("li",[t._v("请联系 "),s("span",{staticClass:"blue",on:{click:t.gotoOperators}},[t._v("宽带运营商")]),t._v(" 或者 "),s("span",{staticClass:"blue",on:{click:t.getAccFromOld}},[t._v("一键从旧路由器获取账号密码")])])])]):t._e()]),t._v(" "),t.showBtn?s("div",{staticClass:"footer width100"},[s("button",{staticClass:"button",attrs:{type:"submit"}},[t._v("下一步")]),t._v(" "),s("div",{staticClass:"bottom"},[s("span",{staticClass:"blue",on:{click:t.selectModel}},[t._v("无需拨号")])])]):t._e()],1)],1)]):2==t.type?s("WifiInput",{attrs:{showBtn:t.showBtn},on:{submit:t.onSubmitWifiAcc}}):3==t.type?s("Loading",{attrs:{desc:"正在拨号，请耐心等待..."}}):s("Loading",{attrs:{desc:"设置中..."}}),t._v(" "),s("Toast",{ref:"tip"})],1)},staticRenderFns:[]};var h=s("C7Lr")(w,f,!1,function(t){s("GqMl")},"data-v-2eb88ec1",null);e.default=h.exports},w7N8:function(t,e){}});